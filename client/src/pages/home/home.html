<ion-header>
  <ion-navbar>
    <ion-title>ShellHacks 2017</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
    
    <agm-map [latitude]="ucflat" [longitude]="ucflng" 
             [gestureHandling]='greedy' [zoomControl]="false" 
             [streetViewControl]="false" (mapClick)="setRegister($event)" 
             (centerChange)="centerChange($event)">

    <agm-info-window #register [latitude]="ucflat" [longitude]="ucflng">
        
    </agm-info-window> 

    <agm-marker *ngFor="let mp of missings" [latitude]="mp.Lat" [longitude]="mp.Lng" 
                 [iconUrl]="icon">

      <agm-info-window
                  style="max-height: 5px; overflow-y: auto;">
        <h5 style="color: #E0263B; text-align: center;">Missing Person</h5>
        <ion-item class="ionItemInfo">
          <ion-label class="ionLabelInfo" stacked>Name: {{mp.Name}}</ion-label>
        </ion-item>

        <ion-item class="ionItemInfo">
          <ion-label class="ionLabelInfo" stacked>Age: {{mp.Age}}</ion-label>
        </ion-item>

        <ion-item class="ionItemInfo">
          <ion-label class="ionLabelInfo" stacked>Gender: {{mp.Gender}}</ion-label>
        </ion-item>

        <ion-item class="ionItemInfo">
          <ion-label class="ionLabelInfo" stacked>Latitude: {{mp.Lat}}</ion-label>
        </ion-item>

        <ion-item class="ionItemInfo">
          <ion-label class="ionLabelInfo" stacked>Longitude: {{mp.Lng}}</ion-label>
        </ion-item>

      </agm-info-window>

    </agm-marker>
      
    </agm-map>



    <div *ngIf="showModal" class="registerPopUp" >
      <div class="form-group">
        <h5 style="color: #FFFFFF; text-align: center;">Missing Person</h5>
        <ion-item class="ionItem">
        <ion-label class="ionLabel" floating>Name:</ion-label>
        <ion-input type="text" style="color: #FFFFFF" [(ngModel)]="missingForm.Name"></ion-input>
        </ion-item>
        <ion-item class="ionItem">
        <ion-label class="ionLabel" floating>Age:</ion-label>
        <ion-input type="text" style="color: #FFFFFF" [(ngModel)]="missingForm.Age"></ion-input>
        </ion-item >
        <ion-item class="ionItem">
        <ion-label class="ionLabel" floating>Gender:</ion-label>
        <ion-input type="text" style="color: #FFFFFF" [(ngModel)]="missingForm.Gender"></ion-input>
        </ion-item>
      </div>

      <button ion-button [color]="blue" [round]="true" (click)="setMarker()">
        Register
      </button>
      <button ion-button [color]="red" [round]="true" 
              (click)="showModal=false" style="background-color: #DB4253;">
        Cancel
      </button>

    </div>

    <button ion-button class="localizacion" [round]="true" (click)="getLocalization()">
        <span class="glyphicon glyphicon-screenshot" style="font-size: 20px;"aria-hidden="true"></span>
    </button>

</ion-content>
